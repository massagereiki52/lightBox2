<!DOCTYPE html>
<html>

<head>
  <title>lightbox</title>
  <link href="https://fonts.googleapis.com/css?family=M+PLUS+1p|Monoton" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Monoton" rel="stylesheet">
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }

    body {
      /*background-color: #EFEAE5;*/
      background: -webkit-linear-gradient(bottom, rgba(255, 255, 255, 1) 0%, rgba(232, 204, 215, 1) 22%, rgba(227, 118, 162, 1) 44%, rgba(222, 29, 103, 1) 66%, rgba(115, 23, 115, 1) 100%);
    }

    h1 {
      font-size: 5em;
      font-family: 'Monoton', cursive;
      color: rgb(5, 219, 96);
      box-sizing: border-box;
      background-color: rgba(0, 0, 0, 0.6);
      text-shadow: 10px, 10px white;
      text-align: center;
      padding: 0.5em auto;
      margin-bottom: 2em;
      margin-top: 1em;
    }

    h3 {
      font-family: 'Monoton', cursive;
      font-size: 1.5em;
      text-align: center;
      padding: 2em;
      align-self: stretch;
      clear: both;
      /*margin-top: 3em;*/
    }

    p {
      /*padding: 2em 5em;*/
      text-align: justify;
      font-size: 2em;
      font-family: 'M PLUS 1p', sans-serif;
      font-style: oblique;
    }

    #slideshow {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;

    }

    .cover {
      background: white;
      opacity: 0.5;
      padding-left: 5em;
      padding-right: 5em;


    }

    .overlay {
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      /* fixed prevents the image and overlay from scrolling */
      position: fixed;
      left: 0;
      top: 0;
    }

    .big {
      /* translate center method */
      /* works best when applied to opject itself */
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);

    }

    .pic {
      padding: 0;
    }

    .small2 {
      margin-right: 3.5em;
    }

    .small1 {
      margin-top: -4.8em;
      align-items: center;
      /*margin-left: 1.5em;*/
    }

    .small {
      filter: drop-shadow(0px 10px 4px rgba(0, 0, 0, 0.4));
    }

    .text {
      font-kerning: 12em;
    }

    #lb,
    #rb {
      width: 32px;
      height: 32px;
      background-color: rgba(0, 0, 0, 0.5);
      cursor: pointer;

    }


    #controls {
      z-index: 1000;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      /* use flex to spread out the buttons that are attached to this object */
      /* this eliminates the need to use float */
      display: flex;
      justify-content: space-between;
    }

    #cap {
      color: rgb(255, 255, 255);
      background-color: rgba(0, 0, 0, 0.5);
      font-size: 2em;
      font-family: sans-serif;
      position: absolute;
      height: 2em;
      /* use flex to align things both vertically and horizontally */
      display: flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
    }

  </style>
  <script type="text/javascript" src="jquery-3.1.1.js"></script>
  <script type="text/javascript">
    $(document).ready(() => {
      // $(document).ready(function() {

      $('#slideshow').append('<div class="overlay"></div>')
      $('.overlay').append('<div id = "controls"></div>')
      $('#controls').append('<div id = "lb" class = "controlButton"><img src="previousArrow.png"></div>')
      $('#controls').append('<div id = "rb" class = "controlButton"><img src="nextArrow.png"></div>')
      $('#controls').append('<div id = "cap"></div>')
      //need to make sure z-index of controls keeps it on top
      $('.overlay').hide()

      $('p.pic').click(function(e) {
        e.preventDefault()
        const imagePath = $(this).children('a').attr('href')
        $('#cap').html($(this).children('a').attr('title'))

        console.log(imagePath);

        $('.overlay').append('<img src ="' + imagePath + '"class = "big">')
        $('.big').on('load', function() {
          resizeImage()
          //use the size data from the image to position the controls
          //}) //end css stuff
        }) //end load image

        $('.overlay').fadeIn('slow')

      }) //end pick click

      $('.overlay').click(function(e) {
        clearBigImage()
      }) //end click overlay


      const pathList = []
      const titleList = []
      const totalImages = $('#slideshow .pic').length
      for (let i = 0; i < totalImages; i++) {
        pathList[i] = $('#slideshow a').eq(i).attr('href')
        titleList[i] = $('#slideshow a').eq(i).attr('title')
      }
      let currentImageNumber
      //
      $('#lb').click(function(e) {
        e.preventDefault()
        e.stopPropagation()
        currentImageNumber = pathList.indexOf($('.big').attr('src'))
        currentImageNumber--;
        if (currentImageNumber >= 0) {
          //       //update image
          updateImageAndTitle()
        } else {
          clearBigImage()
        } //end else
      }) //end lb click

      $('#rb').click(function(e) {
        e.preventDefault()
        e.stopPropagation()
        currentImageNumber = pathList.indexOf($('.big').attr('src'))
        currentImageNumber++;
        if (currentImageNumber < totalImages) {
          updateImageAndTitle()
        } else {
          clearBigImage()
        } //end else

      }) //end rb click

      function updateImageAndTitle() {
        $('.big, #controls').fadeOut(500, function() {
          $('.big').attr('src', pathList[currentImageNumber])
          $('#cap').html(titleList[currentImageNumber])
        })
        $('.big, #controls').fadeIn(500)
      }

      function clearBigImage() {
        $('.overlay').fadeOut('slow')
        $('.big').remove()
      } //end clearBigImage

      $(window).resize(function() {
        resizeImage()
      })

      function resizeImage() {
        $('.big').css({
          width: "",
          height: ""
        })
        const cWidth = $(window).width()
        const cHeight = $(window).height()
        const iWidth = $('.big').width()
        const iHeight = $('.big').height()
        let ratio = 1

        let newHeight;
        let newWidth;
        // $('.pic, #cap, #controls').each(function() {
        if (iHeight >= iWidth) {
          newHeight = cHeight * 0.9
          ratio = cHeight / iHeight;
          newWidth = iWidth * ratio;
          // $(.pic).css('height', iHeight * ratio);
          if (newWidth > cWidth * 0.9) {
            ratio = cWidth / newWidth
            newWidth = cWidth * 0.9
            newHeight *= ratio
          }
        } else if (iHeight < iWidth) {
          newWidth = cWidth * 0.9
          ratio = cWidth / iWidth
          newHeight = iHeight * ratio

          if (newHeight > cHeight * 0.9) {
            ratio = cHeight / newHeight
            newHeight = cHeight * 0.9
            newWidth *= ratio
          }
          // $(.pic).css('height', cHeight);
          // $(.pic).css('width', iWidth * ratio);

        } else {
          console.log("Something went wrong with resize");
        }
        $('.big').css({
          height: newHeight,
          width: newWidth
        })
        $('#controls').css('width', newWidth)
        $('#cap').css({
          top: newHeight / 2 - $('#cap').height() + $('.controlButton').height() / 2,
          width: newWidth
        })
      } //resize


    }) //end ready
  </script>
</head>

<body>
  <h1>
    Danelle's Light Box Assignment
  </h1>

  <div id="slideshow">
    <p class="pic">
      <a href="largeImage1.png" title="A little fun with Illustrator patterns.">
        <img class="small small1"src="smallImage1.png">
      </a>
    </p>

    <p class="pic">
      <a href="largeImage2.png" title="A little fun with Illustrator Patterns and shapes.">
        <img class="small small2" src="smallImage2.png">
      </a>
    </p>
    <p class="pic">
      <a href="largeImage3.jpg" title="Aerial Rocky Mountain View">
        <img class="small small2" src="smallImage3.jpg">
      </a>
    </p>
  </div>

  <div class="cover">
    <h3 class="text">Playing on Illustrator</h3>
    <p class="text">Since I have started school I have learned so much about the different Adobe products. Two of the three images that I placed into my slideshow were created on Illustrator. Illustrator is a vector based computer art program. My favorite thing to do
      on Illustrator is to play around with the different patterns in the swatches and see what kind of fun abstract art I can create.</p>
    <!-- <h3></h3> -->
    <!-- <p></p> -->
  </div>

</body>

</html>
